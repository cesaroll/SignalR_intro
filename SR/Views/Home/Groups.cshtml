
@{
    ViewBag.Title = "Groups";
}

<h2>Groups</h2>

<div>
    <input type="text" id="msg" value="Hola" />
    <input type="button" id="broadcast" value="Broadcast" />
    <ul id="messages"></ul>
</div>

@section scripts {
 
    <script type="text/javascript">

        //Setup connection
        var conn1 = $.connection('/groups');

        // Start Connection
        conn1.start();

        function addMsg(data) {
            $("#messages").append("<li>" + data + "</li>");
        }

        // Send Message to Server/Group
        $("#broadcast").click(function () {
            var group = "MyGroup"; // Group nama

            conn1.send( group + ":" + $("#msg").val() ); // Send Group name, colon, and message
        });

        // Received Message
        conn1.received(addMsg);

    </script>   
    
}